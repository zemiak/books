<f:view xmlns="https://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui"
        xmlns:pm="http://primefaces.org/mobile"
        contentType="text/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:c="http://java.sun.com/jsp/jstl/core">
    
    <pm:page title="Books">
        <pm:view id="main">
            <c:if test="#{bookPage.book.english}">
                <pm:header title="#{bookPage.book.name} (en)">
                    <f:facet name="left"><p:button value="Back" icon="back" href="javascript:history.go(-1);"/></f:facet>
                </pm:header>
            </c:if>

            <c:if test="#{! bookPage.book.english}">
                <pm:header title="#{bookPage.book.name}">
                    <f:facet name="left"><p:button value="Back" icon="back" href="javascript:history.go(-1);"/></f:facet>
                </pm:header>
            </c:if>
            
            <pm:content>
                <h3>Download</h3>
                <h:form id="downloadForm">
                    <!-- Actions have a different scope, bookPage is not constructed -->
                    <h:commandLink action="#{bookPage.fileMobi}" value="Download for Kindle">
                        <f:param name="id" value="#{bookPage.book.id}" />
                    </h:commandLink>
                    
                    <br />
                    <h:commandLink action="#{bookPage.fileEpub}" value="Download as ePub">
                        <f:param name="id" value="#{bookPage.book.id}" />
                    </h:commandLink>
                </h:form>
            </pm:content>
        </pm:view>
    </pm:page>
    
</f:view>
